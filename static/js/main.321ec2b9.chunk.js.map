{"version":3,"sources":["Person.js","Sort.js","PeopleTable.js","App.js","PeopleAPI.js","index.js"],"names":["Person","_ref","person","index","handler","active","selected","rowClass","sex","rowClasses","concat","bornBefore1650","born","ageMore65","age","react_default","a","createElement","className","onClick","id","name","died","century","mother","father","children","map","child","Sort","handleSort","title","columnTitles","PeopleTable","col","match","people","_useState","useState","_useState2","Object","slicedToArray","sortColumn","setSortColumn","history","useHistory","location","useLocation","searchParams","URLSearchParams","search","input","get","sortOrder","handleSelectRow","push","toLowerCase","replace","set","toString","filteredPeople","filter","includes","sortPeople","sort","b","localeCompare","PeopleToShow","reverse","deboncedHandleInputChange","f","delay","timer","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","apply","debounce","value","delete","Fragment","to","onChange","event","target","type","placeholder","src_Sort","i","src_Person","params","App","setPeople","useEffect","response","regenerator_default","async","_context","prev","next","awrap","fetch","sent","abrupt","json","stop","getPeople","then","peopleFromServer","preparedPeople","objectSpread2","Math","ceil","react_router_dom","react_router","path","render","src_PeopleTable","ReactDOM","src_App","test","document","getElementById"],"mappings":"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","file":"static/js/main.321ec2b9.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Person = ({ person, index, handler, selected }) => {\n  const active = selected ? 'person--selected' : '';\n  const rowClass = person.sex === 'f'\n    ? 'person person--female'\n    : 'person person--male';\n  const rowClasses = `${active} + ${rowClass}`;\n  const bornBefore1650 = person.born < 1650\n    ? 'born_before_1650'\n    : '';\n  const ageMore65 = (person.age) >= 65\n    ? 'age_more_65'\n    : '';\n\n  return (\n    <tr\n      className={rowClasses}\n      onClick={() => handler(index)}\n    >\n      <td>{person.id}</td>\n      <td className={bornBefore1650}>{person.name}</td>\n      <td>{person.sex}</td>\n      <td>{person.born}</td>\n      <td>{person.died}</td>\n      <td className={ageMore65}>{person.age}</td>\n      <td>{person.century}</td>\n      <td>{person.mother}</td>\n      <td>{person.father}</td>\n      <td>{person.children.map(child => `${child.name}, `)}</td>\n    </tr>\n  );\n};\n\nPerson.propTypes = {\n  person: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  handler: PropTypes.func.isRequired,\n  selected: PropTypes.bool.isRequired,\n};\n\nexport default Person;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Sort = ({ handleSort, title }) => (\n  <th\n    onClick={() => handleSort(title)}\n    className=\"column-header\"\n  >\n    {title}\n  </th>\n);\n\nSort.propTypes = {\n  handleSort: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\nexport default Sort;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport Person from './Person';\nimport Sort from './Sort';\n\nconst columnTitles\n  = ['id',\n    'name',\n    'sex',\n    'born',\n    'died',\n    'age',\n    'century',\n    'mother',\n    'father',\n    'children'];\n\nconst PeopleTable = ({ match, people }) => {\n  const [sortColumn, setSortColumn] = useState('id');\n\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const input = searchParams.get('query');\n  const sortOrder = searchParams.get('sortOrder');\n\n  const handleSelectRow = (index) => {\n    history\n      .push(`/people/${(people[index].name)\n        .toLowerCase().replace(/\\s/g, '-')}`);\n  };\n\n  const debounce = (f, delay) => {\n    let timer;\n\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => f(...args), delay);\n    };\n  };\n\n  const handleInputChange = (value) => {\n    searchParams.set('query', value);\n    if (value) {\n      history.push({ search: searchParams.toString() });\n    } else {\n      searchParams.delete('query');\n      history.push({ search: searchParams.toString() });\n    }\n  };\n\n  const handleSort = (title) => {\n    if (title !== sortColumn) {\n      searchParams.set('sortBy', title);\n      searchParams.set('sortOrder', 'asc');\n    }\n\n    if (title === sortColumn) {\n      searchParams.set('sortBy', title);\n      searchParams.set('sortOrder', 'desc');\n    }\n\n    if (title === sortColumn && sortOrder === 'desc') {\n      searchParams.set('sortOrder', 'asc');\n    }\n\n    history.push({ search: searchParams.toString() });\n    setSortColumn(title);\n  };\n\n  const filteredPeople = input\n    ? people.filter(person => person.name.toLowerCase()\n      .includes(input.toLowerCase())\n      || (person.mother !== null\n        && person.mother.toLowerCase().includes(input.toLowerCase()))\n      || (person.father !== null\n        && person.father.toLowerCase().includes(input.toLowerCase())))\n    : people;\n\n  const sortingArr = (arr, col) => arr\n    .sort((a, b) => (typeof (a[col]) === 'string'\n      ? a[col].localeCompare(b[col])\n      : a[col] - b[col]));\n\n  const sortPeople = sortingArr(filteredPeople, sortColumn);\n\n  const PeopleToShow = sortOrder === 'desc'\n    ? sortPeople.reverse()\n    : sortPeople;\n\n  const deboncedHandleInputChange = debounce(handleInputChange, 500);\n\n  return (\n    <>\n      <p\n        className=\"count\"\n        to=\"/people\"\n      >\n        count of people:\n        {' '}\n        {PeopleToShow.length}\n      </p>\n      <label>\n        <input\n          onChange={event => deboncedHandleInputChange(event.target.value)}\n          type=\"search\"\n          className=\"input\"\n          placeholder=\"Search\"\n        />\n      </label>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            {columnTitles.map(title => (\n              <Sort\n                handleSort={handleSort}\n                title={title}\n              />\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {PeopleToShow.map((person, i) => (\n            <Person\n              person={person}\n              index={i}\n              handler={handleSelectRow}\n              selected={person.name.toLowerCase().replace(/\\s/g, '-')\n                === match.params.name}\n            />\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nPeopleTable.propTypes = {\n  people: PropTypes.arrayOf(PropTypes.object).isRequired,\n  match: PropTypes.string.isRequired,\n};\n\nexport default PeopleTable;\n","import React, { useState, useEffect } from 'react';\nimport './app.css';\nimport { Route, Link } from 'react-router-dom';\nimport PeopleTable from './PeopleTable';\n\nimport { getPeople } from './PeopleAPI';\n\nconst App = () => {\n  const [people, setPeople] = useState([]);\n\n  useEffect(() => {\n    getPeople().then((peopleFromServer) => {\n      const preparedPeople = peopleFromServer.map((person, i) => ({\n        ...person,\n        id: i + 1,\n        age: person.died - person.born,\n        century: Math.ceil(person.died / 100),\n        children: peopleFromServer\n          .filter(child => child.mother === person.name\n            || child.father === person.name),\n      }));\n\n      setPeople(preparedPeople);\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Link to=\"/people\" className=\"start\">People table</Link>\n      <Route\n        path=\"/people/:name?\"\n        render={({ match }) => (<PeopleTable people={people} match={match} />)}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","/* eslint-disable-next-line */\nconst URLPeople = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getPeople = async() => {\n  const response = await fetch(URLPeople);\n\n  return response.json();\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App test={123} />\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}