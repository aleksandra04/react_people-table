{"version":3,"sources":["Person.js","Sort.js","PeopleTable.js","App.js","PeopleAPI.js","index.js"],"names":["Person","_ref","person","handler","active","selected","rowClass","sex","rowClasses","concat","bornBefore1650","born","ageMore65","age","react_default","a","createElement","className","onClick","id","name","died","century","mother","father","children","map","child","Sort","handleSort","title","columnTitles","PeopleTable","col","match","people","_useState","useState","_useState2","Object","slicedToArray","sortColumn","setSortColumn","history","useHistory","location","useLocation","searchParams","URLSearchParams","search","input","get","sortOrder","sortColumnUrl","handleSelectRow","push","pathname","find","toLowerCase","replace","set","toString","filteredPeople","filter","includes","sortPeople","sort","b","localeCompare","PeopleToShow","reverse","deboncedHandleInputChange","f","delay","timer","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","apply","debounce","value","delete","Fragment","to","onChange","event","target","type","placeholder","src_Sort","src_Person","params","App","setPeople","useEffect","response","regenerator_default","async","_context","prev","next","awrap","fetch","sent","abrupt","json","stop","getPeople","then","peopleFromServer","preparedPeople","i","objectSpread2","Math","ceil","react_router_dom","react_router","path","render","src_PeopleTable","ReactDOM","src_App","test","document","getElementById"],"mappings":"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","file":"static/js/main.633ad759.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Person = ({ person, handler, selected }) => {\n  const active = selected ? 'person--selected' : '';\n  const rowClass = person.sex === 'f'\n    ? 'person person--female'\n    : 'person person--male';\n  const rowClasses = `${active} + ${rowClass}`;\n  const bornBefore1650 = person.born < 1650\n    ? 'born_before_1650'\n    : '';\n  const ageMore65 = (person.age) >= 65\n    ? 'age_more_65'\n    : '';\n\n  return (\n    <tr\n      className={rowClasses}\n      onClick={() => handler(person.id)}\n    >\n      <td>{person.id}</td>\n      <td className={bornBefore1650}>{person.name}</td>\n      <td>{person.sex}</td>\n      <td>{person.born}</td>\n      <td>{person.died}</td>\n      <td className={ageMore65}>{person.age}</td>\n      <td>{person.century}</td>\n      <td>{person.mother}</td>\n      <td>{person.father}</td>\n      <td>{person.children.map(child => `${child.name}, `)}</td>\n    </tr>\n  );\n};\n\nPerson.propTypes = {\n  person: PropTypes.string.isRequired,\n  handler: PropTypes.func.isRequired,\n  selected: PropTypes.bool.isRequired,\n};\n\nexport default Person;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Sort = ({ handleSort, title }) => (\n  <th\n    onClick={() => handleSort(title)}\n    className=\"column-header\"\n  >\n    {title}\n  </th>\n);\n\nSort.propTypes = {\n  handleSort: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\nexport default Sort;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport Person from './Person';\nimport Sort from './Sort';\n\nconst columnTitles\n  = ['id',\n    'name',\n    'sex',\n    'born',\n    'died',\n    'age',\n    'century',\n    'mother',\n    'father',\n    'children'];\n\nconst PeopleTable = ({ match, people }) => {\n  const [sortColumn, setSortColumn] = useState('id');\n\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const input = searchParams.get('query');\n  const sortOrder = searchParams.get('sortOrder');\n  const sortColumnUrl = searchParams.get('sortBy');\n\n  const handleSelectRow = (id) => {\n    history.push({\n      pathname: `/people/${(people.find(person => person.id === id).name)\n        .toLowerCase().replace(/\\s/g, '-')}`,\n      search: location.search,\n    });\n  };\n\n  const debounce = (f, delay) => {\n    let timer;\n\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => f(...args), delay);\n    };\n  };\n\n  const handleInputChange = (value) => {\n    searchParams.set('query', value);\n    if (value) {\n      history.push({ search: searchParams.toString() });\n    } else {\n      searchParams.delete('query');\n      history.push({ search: searchParams.toString() });\n    }\n  };\n\n  const handleSort = (title) => {\n    if (title !== sortColumn) {\n      searchParams.set('sortBy', title);\n      searchParams.set('sortOrder', 'asc');\n    }\n\n    if (title === sortColumn) {\n      searchParams.set('sortBy', title);\n      searchParams.set('sortOrder', 'desc');\n    }\n\n    if (title === sortColumn && sortOrder === 'desc') {\n      searchParams.set('sortOrder', 'asc');\n    }\n\n    history.push({ search: searchParams.toString() });\n    setSortColumn(title);\n  };\n\n  const filteredPeople = input\n    ? people.filter(person => person.name.toLowerCase()\n      .includes(input.toLowerCase())\n      || (person.mother !== null\n        && person.mother.toLowerCase().includes(input.toLowerCase()))\n      || (person.father !== null\n        && person.father.toLowerCase().includes(input.toLowerCase())))\n    : people;\n\n  const sortingArr = (arr, col) => arr\n    .sort((a, b) => (typeof (a[col]) === 'string'\n      ? a[col].localeCompare(b[col])\n      : a[col] - b[col]));\n\n  const sortPeople = sortingArr(filteredPeople, sortColumnUrl);\n\n  const PeopleToShow = sortOrder === 'desc'\n    ? sortPeople.reverse()\n    : sortPeople;\n\n  const deboncedHandleInputChange = debounce(handleInputChange, 500);\n\n  return (\n    <>\n      <p\n        className=\"count\"\n        to=\"/people\"\n      >\n        count of people:\n        {' '}\n        {PeopleToShow.length}\n      </p>\n      <label>\n        <input\n          onChange={event => deboncedHandleInputChange(event.target.value)}\n          type=\"search\"\n          className=\"input\"\n          placeholder=\"Search\"\n        />\n      </label>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            {columnTitles.map(title => (\n              <Sort\n                handleSort={handleSort}\n                title={title}\n              />\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {PeopleToShow.map(person => (\n            <Person\n              person={person}\n              handler={handleSelectRow}\n              selected={person.name.toLowerCase().replace(/\\s/g, '-')\n                === match.params.name}\n            />\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nPeopleTable.propTypes = {\n  people: PropTypes.arrayOf(PropTypes.object).isRequired,\n  match: PropTypes.string.isRequired,\n};\n\nexport default PeopleTable;\n","import React, { useState, useEffect } from 'react';\nimport './app.css';\nimport { Route, Link } from 'react-router-dom';\nimport PeopleTable from './PeopleTable';\n\nimport { getPeople } from './PeopleAPI';\n\nconst App = () => {\n  const [people, setPeople] = useState([]);\n\n  useEffect(() => {\n    getPeople().then((peopleFromServer) => {\n      const preparedPeople = peopleFromServer.map((person, i) => ({\n        ...person,\n        id: i + 1,\n        age: person.died - person.born,\n        century: Math.ceil(person.died / 100),\n        children: peopleFromServer\n          .filter(child => child.mother === person.name\n            || child.father === person.name),\n      }));\n\n      setPeople(preparedPeople);\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Link to=\"/people\" className=\"start\">People table</Link>\n      <Route\n        path=\"/people/:name?\"\n        render={({ match }) => (<PeopleTable people={people} match={match} />)}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","/* eslint-disable-next-line */\nconst URLPeople = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getPeople = async() => {\n  const response = await fetch(URLPeople);\n\n  return response.json();\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App test={123} />\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}